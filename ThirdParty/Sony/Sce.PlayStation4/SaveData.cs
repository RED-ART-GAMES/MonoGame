//----------------------------------------------------------------------------
// This is autogenerated code by CppSharp.
// Do not edit this file or all your changes will be lost after re-generation.
//----------------------------------------------------------------------------
using System;
using System.Runtime.InteropServices;
using System.Security;

namespace Sce.PlayStation4
{
    namespace System
    {
        public enum SaveDataResult
        {
            Ok = 0,
            ErrorParameter = -2137063424,
            ErrorNotInitialized = -2137063423,
            ErrorOutOfMemory = -2137063422,
            ErrorBusy = -2137063421,
            ErrorBackupBusy = -2137063405,
            ErrorNotMounted = -2137063420,
            ErrorNoPermission = -2137063419,
            ErrroFingerprintMismatch = -2137063418,
            ErrorExists = -2137063417,
            ErrorNotFound = -2137063416,
            ErrorNoSpaceFs = -2137063414,
            ErrorInternal = -2137063413,
            ErrorMountFull = -2137063412,
            ErrorBadMounted = -2137063411,
            ErrorFileNotFound = -2137063410,
            ErrorBroken = -2137063409,
            ErrorInvalidLoginUser = -2137063407,
            ErrorUserServiceNotInitialized = -2137653246
        }

        [Flags]
        public enum SaveDataMountMode
        {
            ReadOnly = 1,
            ReadWrite = 2,
            Create = 4,
            Create2 = 32,
            DestructOff = 8,
            CopyIcon = 16
        }

        [Flags]
        public enum SaveDataConst : uint
        {
            BlockSize = 32768,
            IconWidth = 228,
            IconHeight = 128
        }

        public unsafe partial class SaveData : IDisposable
        {
            [StructLayout(LayoutKind.Explicit, Size = 1304)]
            public partial struct Internal
            {
                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveDataC2Ev")]
                internal static extern void ctor_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveDataC2ERKS0_")]
                internal static extern void cctor_1(global::System.IntPtr instance, global::System.IntPtr _0);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveDataC2EiPKcS2_S2_")]
                internal static extern void ctor_2(global::System.IntPtr instance, int userId, global::System.IntPtr titleId, global::System.IntPtr dirName, global::System.IntPtr fingerprint);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveDataD2Ev")]
                internal static extern void dtor_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData10InitializeENS_10ThreadPrioE")]
                internal static extern System.SaveDataResult Initialize_0(System.ThreadPrio priority);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData9TerminateEv")]
                internal static extern System.SaveDataResult Terminate_0();

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData6DeleteEiPKcS2_Pj")]
                internal static extern System.SaveDataResult Delete_0(int userId, global::System.IntPtr titleId, global::System.IntPtr dirName, uint* progress);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData5MountEmNS_17SaveDataMountModeERmRj")]
                internal static extern System.SaveDataResult Mount_0(global::System.IntPtr instance, ulong blocks, System.SaveDataMountMode mountMode, ulong* requiredBlocks, uint* progress);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData7UnmountEb")]
                internal static extern System.SaveDataResult Unmount_0(global::System.IntPtr instance, bool withBackup);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData17UnmountWithBackupEv")]
                internal static extern System.SaveDataResult UnmountWithBackup_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZNK6System8SaveData5WriteEPKcPKvm")]
                [return: MarshalAsAttribute(UnmanagedType.I1)]
                internal static extern bool Write_0(global::System.IntPtr instance, global::System.IntPtr path, void* buf, ulong nbytes);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZNK6System8SaveData4ReadEPKc")]
                internal static extern sbyte* Read_0(global::System.IntPtr instance, global::System.IntPtr path);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZNK6System8SaveData8FreeReadEPc")]
                internal static extern void FreeRead_0(global::System.IntPtr instance, sbyte* data);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZNK6System8SaveData10FileExistsEPKc")]
                [return: MarshalAsAttribute(UnmanagedType.I1)]
                internal static extern bool FileExists_0(global::System.IntPtr instance, global::System.IntPtr path);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZNK6System8SaveData5MkDirEPKc")]
                [return: MarshalAsAttribute(UnmanagedType.I1)]
                internal static extern bool MkDir_0(global::System.IntPtr instance, global::System.IntPtr path);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData12GetMountInfoEPmS1_")]
                internal static extern System.SaveDataResult GetMountInfo_0(global::System.IntPtr instance, ulong* blocks, ulong* freeBlocks);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData13RestoreBackupEv")]
                internal static extern void RestoreBackup_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData17IsBackupAvailableEv")]
                [return: MarshalAsAttribute(UnmanagedType.I1)]
                internal static extern bool IsBackupAvailable_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData9_LoadIconEPvmPm")]
                internal static extern System.SaveDataResult _LoadIcon_0(global::System.IntPtr instance, void* buffer, ulong bufferSize, ulong* dataSize);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData9_SaveIconEPvm")]
                internal static extern System.SaveDataResult _SaveIcon_0(global::System.IntPtr instance, void* buffer, ulong bufferSize);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZNK6System8SaveData13GetMountPointEv")]
                internal static extern global::System.IntPtr GetMountPoint_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData8GetTitleEv")]
                internal static extern global::System.IntPtr GetTitle_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData8SetTitleEPKc")]
                internal static extern void SetTitle_0(global::System.IntPtr instance, global::System.IntPtr title);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData11GetSubTitleEv")]
                internal static extern global::System.IntPtr GetSubTitle_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData11SetSubTitleEPKc")]
                internal static extern void SetSubTitle_0(global::System.IntPtr instance, global::System.IntPtr subTitle);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData9GetDetailEv")]
                internal static extern global::System.IntPtr GetDetail_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData9SetDetailEPKc")]
                internal static extern void SetDetail_0(global::System.IntPtr instance, global::System.IntPtr detail);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData9GetUserIdEv")]
                internal static extern int GetUserId_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData12GetUserParamEv")]
                internal static extern uint GetUserParam_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData12SetUserParamEj")]
                internal static extern void SetUserParam_0(global::System.IntPtr instance, uint userParam);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData8GetMTimeEv")]
                internal static extern long GetMTime_0(global::System.IntPtr instance);

                [SuppressUnmanagedCodeSecurity]
                [DllImport("scePlayStation4.prx", CallingConvention = global::System.Runtime.InteropServices.CallingConvention.Cdecl,
                    EntryPoint="_ZN6System8SaveData8SetMTimeEl")]
                internal static extern void SetMTime_0(global::System.IntPtr instance, long userParam);
            }

            public global::System.IntPtr __Instance { get; protected set; }

            internal SaveData(SaveData.Internal* native)
                : this(new global::System.IntPtr(native))
            {
            }

            internal SaveData(SaveData.Internal native)
                : this(&native)
            {
            }

            public SaveData(global::System.IntPtr native, bool isInternalImpl = false)
            {
                __Instance = native;
            }

            public SaveData(int userId, string titleId, string dirName, string fingerprint)
            {
                __Instance = Marshal.AllocHGlobal(1304);
                var arg0 = userId;
                var arg1 = Marshal.StringToHGlobalAnsi(titleId);
                var arg2 = Marshal.StringToHGlobalAnsi(dirName);
                var arg3 = Marshal.StringToHGlobalAnsi(fingerprint);
                Internal.ctor_2(__Instance, arg0, arg1, arg2, arg3);
                Marshal.FreeHGlobal(arg1);
                Marshal.FreeHGlobal(arg2);
                Marshal.FreeHGlobal(arg3);
            }

            public void Dispose()
            {
                Dispose(disposing: true);
                GC.SuppressFinalize(this);
            }

            protected virtual void Dispose(bool disposing)
            {
                Internal.dtor_0(__Instance);
                Marshal.FreeHGlobal(__Instance);
            }

            public System.SaveDataResult Mount(ulong blocks, System.SaveDataMountMode mountMode, out ulong requiredBlocks, out uint progress)
            {
                var arg0 = blocks;
                var arg1 = mountMode;
                ulong _requiredBlocks;
                var arg2 = &_requiredBlocks;
                uint _progress;
                var arg3 = &_progress;
                var __ret = Internal.Mount_0(__Instance, arg0, arg1, arg2, arg3);
                requiredBlocks = _requiredBlocks;
                progress = _progress;
                return __ret;
            }

            public System.SaveDataResult Unmount(bool withBackup)
            {
                var __ret = Internal.Unmount_0(__Instance, withBackup);
                return __ret;
            }

            public System.SaveDataResult UnmountWithBackup()
            {
                var __ret = Internal.UnmountWithBackup_0(__Instance);
                return __ret;
            }

            public bool Write(string path, void* buf, ulong nbytes)
            {
                var arg0 = Marshal.StringToHGlobalAnsi(path);
                var arg1 = buf;
                var arg2 = nbytes;
                var __ret = Internal.Write_0(__Instance, arg0, arg1, arg2);
                Marshal.FreeHGlobal(arg0);
                return __ret;
            }

            public sbyte* Read(string path)
            {
                var arg0 = Marshal.StringToHGlobalAnsi(path);
                var __ret = Internal.Read_0(__Instance, arg0);
                Marshal.FreeHGlobal(arg0);
                return __ret;
            }

            public void FreeRead(sbyte* data)
            {
                var arg0 = data;
                Internal.FreeRead_0(__Instance, arg0);
            }

            public bool FileExists(string path)
            {
                var arg0 = Marshal.StringToHGlobalAnsi(path);
                var __ret = Internal.FileExists_0(__Instance, arg0);
                Marshal.FreeHGlobal(arg0);
                return __ret;
            }

            public bool MkDir(string path)
            {
                var arg0 = Marshal.StringToHGlobalAnsi(path);
                var __ret = Internal.MkDir_0(__Instance, arg0);
                Marshal.FreeHGlobal(arg0);
                return __ret;
            }

            public System.SaveDataResult GetMountInfo(out ulong blocks, out ulong freeBlocks)
            {
                ulong _blocks;
                var arg0 = &_blocks;
                ulong _freeBlocks;
                var arg1 = &_freeBlocks;
                var __ret = Internal.GetMountInfo_0(__Instance, arg0, arg1);
                blocks = _blocks;
                freeBlocks = _freeBlocks;
                return __ret;
            }

            public void RestoreBackup()
            {
                Internal.RestoreBackup_0(__Instance);
            }

            public bool IsBackupAvailable()
            {
                var __ret = Internal.IsBackupAvailable_0(__Instance);
                return __ret;
            }

            protected System.SaveDataResult _LoadIcon(void* buffer, ulong bufferSize, out ulong dataSize)
            {
                var arg0 = buffer;
                var arg1 = bufferSize;
                ulong _dataSize;
                var arg2 = &_dataSize;
                var __ret = Internal._LoadIcon_0(__Instance, arg0, arg1, arg2);
                dataSize = _dataSize;
                return __ret;
            }

            protected System.SaveDataResult _SaveIcon(void* buffer, ulong bufferSize)
            {
                var arg0 = buffer;
                var arg1 = bufferSize;
                var __ret = Internal._SaveIcon_0(__Instance, arg0, arg1);
                return __ret;
            }

            public static System.SaveDataResult Initialize(System.ThreadPrio priority)
            {
                var arg0 = priority;
                var __ret = Internal.Initialize_0(arg0);
                return __ret;
            }

            public static System.SaveDataResult Terminate()
            {
                var __ret = Internal.Terminate_0();
                return __ret;
            }

            public static System.SaveDataResult Delete(int userId, string titleId, string dirName, out uint progress)
            {
                var arg0 = userId;
                var arg1 = Marshal.StringToHGlobalAnsi(titleId);
                var arg2 = Marshal.StringToHGlobalAnsi(dirName);
                uint _progress;
                var arg3 = &_progress;
                var __ret = Internal.Delete_0(arg0, arg1, arg2, arg3);
                progress = _progress;
                Marshal.FreeHGlobal(arg1);
                Marshal.FreeHGlobal(arg2);
                return __ret;
            }

            public string MountPoint
            {
                get
                {
                    var __ret = Internal.GetMountPoint_0(__Instance);
                    if (__ret == global::System.IntPtr.Zero) return null;
                    return Marshal.PtrToStringAnsi(__ret);
                }
            }

            public string Title
            {
                get
                {
                    var __ret = Internal.GetTitle_0(__Instance);
                    if (__ret == global::System.IntPtr.Zero) return null;
                    return Marshal.PtrToStringAnsi(__ret);
                }

                set
                {
                    var arg0 = Marshal.StringToHGlobalAnsi(value);
                    Internal.SetTitle_0(__Instance, arg0);
                    Marshal.FreeHGlobal(arg0);
                }
            }

            public string SubTitle
            {
                get
                {
                    var __ret = Internal.GetSubTitle_0(__Instance);
                    if (__ret == global::System.IntPtr.Zero) return null;
                    return Marshal.PtrToStringAnsi(__ret);
                }

                set
                {
                    var arg0 = Marshal.StringToHGlobalAnsi(value);
                    Internal.SetSubTitle_0(__Instance, arg0);
                    Marshal.FreeHGlobal(arg0);
                }
            }

            public string Detail
            {
                get
                {
                    var __ret = Internal.GetDetail_0(__Instance);
                    if (__ret == global::System.IntPtr.Zero) return null;
                    return Marshal.PtrToStringAnsi(__ret);
                }

                set
                {
                    var arg0 = Marshal.StringToHGlobalAnsi(value);
                    Internal.SetDetail_0(__Instance, arg0);
                    Marshal.FreeHGlobal(arg0);
                }
            }

            public int UserId
            {
                get
                {
                    var __ret = Internal.GetUserId_0(__Instance);
                    return __ret;
                }
            }

            public uint UserParam
            {
                get
                {
                    var __ret = Internal.GetUserParam_0(__Instance);
                    return __ret;
                }

                set
                {
                    var arg0 = value;
                    Internal.SetUserParam_0(__Instance, arg0);
                }
            }

            public long MTime
            {
                get
                {
                    var __ret = Internal.GetMTime_0(__Instance);
                    return __ret;
                }

                set
                {
                    var arg0 = value;
                    Internal.SetMTime_0(__Instance, arg0);
                }
            }
        }
    }
}
